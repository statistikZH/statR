<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visualisierungen • statR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Visualisierungen">
<meta property="og:description" content="statR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">statR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Excel-Tabellen.html">Excel-Tabellen</a>
    </li>
    <li>
      <a href="../articles/Sonstige_Funktionen.html">Sonstige Funktionen</a>
    </li>
    <li>
      <a href="../articles/Visualisierungen.html">Visualisierungen</a>
    </li>
    <li>
      <a href="../articles/html_report_template.html">HTML Dokumente im ZH.CH-Design</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/statistikZH/statR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Visualisierungen</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/statistikZH/statR/blob/HEAD/vignettes/Visualisierungen.Rmd" class="external-link"><code>vignettes/Visualisierungen.Rmd</code></a></small>
      <div class="hidden name"><code>Visualisierungen.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="theme-für-grafiken-im-corporate-design">Theme für Grafiken im Corporate Design<a class="anchor" aria-label="anchor" href="#theme-f%C3%BCr-grafiken-im-corporate-design"></a>
</h2>
<div class="section level3">
<h3 id="das-theme_stat-für-ggplot2---grafiken">Das <code>theme_stat</code> für ggplot2 - Grafiken<a class="anchor" aria-label="anchor" href="#das-theme_stat-f%C3%BCr-ggplot2---grafiken"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://statistikzh.github.io/statR/" class="external-link">statR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/wch/downloader" class="external-link">downloader</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-lib/zip#readme" class="external-link">zip</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">dichromat</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/slowkow/ggrepel" class="external-link">ggrepel</a></span><span class="op">)</span></span></code></pre></div>
<p>Das <strong>statR</strong>-ggplot2-theme ist darauf ausgelegt, sich
gut ins kantonale Corporate Design einzufügen. Es basiert auf dem
ggplot2-theme ‘minimal’ und bestimmt diejenigen Grafikeigenschaften, die
nichts mit den Daten an sich zu tun haben (z.B. die Schriftart).</p>
<p>Innerhalb des themes kann die Schriftgrösse, die Position der
Achsenbeschriftungen sowie das Vorhandensein von Achsenlinien,
Achsen-Ticks und Gitterlinien bestimmt werden (siehe
<code>?theme_stat()</code>).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">class</span>, fill <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># Default-Spezifikationen innerhalb theme_stat()</span></span>
<span>  <span class="fu"><a href="../reference/theme_stat.html">theme_stat</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">11</span>,</span>
<span>             axis.label.pos <span class="op">=</span> <span class="st">"top"</span>,</span>
<span>             axis.lines <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>             ticks <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>             minor.grid.lines <span class="op">=</span> <span class="st">"y"</span>,</span>
<span>             major.grid.lines <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Title"</span>, subtitle <span class="op">=</span> <span class="st">"Subtitle"</span>, caption <span class="op">=</span> <span class="st">"Caption"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values<span class="op">=</span><span class="va">zhpal</span><span class="op">$</span><span class="va">zhwebdataviz</span><span class="op">[</span><span class="fl">11</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>Mit der Funktion <code><a href="../reference/flush_left.html">flush_left()</a></code> können Titel, Untertitel
und Fussnote nach links verschoben werden, sodass sie bündig sind mit
der y-Achse der Grafik:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">class</span>,fill <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># Default-Spezifikationen innerhalb theme_stat()</span></span>
<span>  <span class="fu"><a href="../reference/theme_stat.html">theme_stat</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">11</span>,</span>
<span>             axis.label.pos <span class="op">=</span> <span class="st">"top"</span>,</span>
<span>             axis.lines <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>             ticks <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>             minor.grid.lines <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Title"</span>, subtitle <span class="op">=</span> <span class="st">"Subtitle"</span>, caption <span class="op">=</span> <span class="st">"Caption"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values<span class="op">=</span><span class="va">zhpal</span><span class="op">$</span><span class="va">zhwebdataviz</span><span class="op">[</span><span class="fl">11</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/flush_left.html">flush_left</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="das-theme_stat-für-karten">Das <code>theme_stat()</code> für Karten<a class="anchor" aria-label="anchor" href="#das-theme_stat-f%C3%BCr-karten"></a>
</h3>
<p>Für Karten kann die Option <code>map</code> auf <code>TRUE</code>
gesetzt werden.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Bezug der Geodaten mit den Gemeindegrenzen (Stand 2020)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.exists</a></span><span class="op">(</span><span class="st">"data/GEN_A4_GEMEINDEN_2020_shp"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">downloader</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/downloader/man/download.html" class="external-link">download</a></span><span class="op">(</span></span>
<span>    <span class="st">"https://www.web.statistik.zh.ch/ogd/daten/ressourcen/KTZH_00000151_00001653.zip"</span>,</span>
<span>    <span class="st">"data/geodata.zip"</span><span class="op">)</span></span>
<span>  <span class="fu">zip</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/zip/man/unzip.html" class="external-link">unzip</a></span><span class="op">(</span><span class="st">"data/geodata.zip"</span>, exdir <span class="op">=</span> <span class="st">"data/"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">shape</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="st">"data/GEN_A4_GEMEINDEN_2020_shp"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Multiple layers are present in data source /home/b105p06@ji.ktzh.ch/gitrepos/statR/vignettes/data/GEN_A4_GEMEINDEN_2020_shp, reading layer `GEN_A4_GEMEINDEN_2020'.</span></span>
<span><span class="co">#&gt; Use `st_layers' to list all layer names and their type in a data source.</span></span>
<span><span class="co">#&gt; Set the `layer' argument in `st_read' to read a particular layer.</span></span>
<span><span class="co">#&gt; Warning in CPL_read_ogr(dsn, layer, query, as.character(options), quiet, :</span></span>
<span><span class="co">#&gt; automatically selected the first layer in a data source containing more than</span></span>
<span><span class="co">#&gt; one.</span></span>
<span><span class="co">#&gt; Reading layer `GEN_A4_GEMEINDEN_2020' from data source </span></span>
<span><span class="co">#&gt;   `/home/b105p06@ji.ktzh.ch/gitrepos/statR/vignettes/data/GEN_A4_GEMEINDEN_2020_shp' </span></span>
<span><span class="co">#&gt;   using driver `ESRI Shapefile'</span></span>
<span><span class="co">#&gt; Simple feature collection with 162 features and 5 fields</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 2669348 ymin: 1223935 xmax: 2716770 ymax: 1283389</span></span>
<span><span class="co">#&gt; Projected CRS: CH1903+ / LV95</span></span>
<span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">shape</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">BFS</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_stat.html">theme_stat</a></span><span class="op">(</span>map <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Title"</span>, subtitle <span class="op">=</span> <span class="st">"Subtitle"</span>, caption <span class="op">=</span> <span class="st">"Caption"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">map</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="farbpaletten-barrierefreiheit">Farbpaletten &amp; Barrierefreiheit<a class="anchor" aria-label="anchor" href="#farbpaletten-barrierefreiheit"></a>
</h2>
<p>Das Farbpalettenobjekt <code>zhpal</code> enthält alle im Package
vorhandenen Farbpaletten und ist mit dem geladenen
<code>statR</code>-Package global verfügbar.</p>
<p>Mit der Funktion <code><a href="../reference/display.statcol.all.html">display.statcol.all()</a></code> können alle
vorhandenen Farbpaletten angezeigt werden:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/display.statcol.all.html">display.statcol.all</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Mit der Funktion <code><a href="../reference/display.html">display()</a></code> kann man sich die Farben
einer Palette anschauen:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/display.html">display</a></span><span class="op">(</span><span class="va">zhpal</span><span class="op">$</span><span class="va">zhwebdataviz</span><span class="op">)</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>Mit der Funktion <code><a href="https://rdrr.io/r/grDevices/colorRamp.html" class="external-link">grDevices::colorRampPalette()</a></code> kann eine
beliebige Anzahl Farbtöne basierend auf einer statR-Farbpalette erstellt
werden:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Mische 20 Farbtöne auf Basis der zhdiagonal-Palette</span></span>
<span><span class="fu"><a href="../reference/display.html">display</a></span><span class="op">(</span><span class="fu">grDevices</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grDevices/colorRamp.html" class="external-link">colorRampPalette</a></span><span class="op">(</span><span class="op">(</span><span class="va">zhpal</span><span class="op">$</span><span class="va">zhwebdataviz</span><span class="op">)</span>,space<span class="op">=</span><span class="st">"Lab"</span><span class="op">)</span><span class="op">(</span><span class="fl">20</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>Anwendungsbeispiel mit kategorialen Daten:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#verwende die Paletten für kategoriale Daten mittels 'scale_fill_manual'</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">class</span>,fill <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_stat.html">theme_stat</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values<span class="op">=</span><span class="va">zhpal</span><span class="op">$</span><span class="va">zhwebdataviz</span><span class="op">)</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<div class="section level3">
<h3 id="grafiken-fürs-zhweb">Grafiken fürs ZHWeb<a class="anchor" aria-label="anchor" href="#grafiken-f%C3%BCrs-zhweb"></a>
</h3>
<p>Bei Grafiken, welche auf <a href="zh.ch">zh.ch</a> publiziert werden
sollen, gilt es folgendes zu berücksichtigen:</p>
<ul>
<li>Maximale Bildgrösse 4000x4000</li>
<li>Grafik-Titel, Untertitel, Legende, Quelle und Alt-Text müssen direkt
im CMS (Bild-Komponente) hinterlegt und nicht in die Grafik selber
integriert werden</li>
<li>es muss eine auf Farbsehschwächen optimierte Farbpalette verwendet
werden</li>
</ul>
<p>Im <a href="https://www.zh.ch/de/webangebote-entwickeln-und-gestalten/inhalt/barrierefreiheit/vorgaben-zur-barrierefreiheit/barrierefreiheit-von-infografiken-und-visualisierungen.zhweb-noredirect.zhweb-cache.html?node-id=21442%3A184215&amp;node-id=21330%3A183551&amp;node-id=21297%3A183984" class="external-link">Designsystem</a>
ist die offizielle Farbpalette für Grafiken im Web publiziert.</p>
<p>Die offiziellen Farbpaletten sind im statR-Package integriert. * die
Palette <strong>zhwebdataviz</strong> enthält die Farben, die im Web
genutzt werden sollen * die Palette <strong>zhwebaccent</strong> enthält
die Akzentfarben des Designsystems. Diese sollten aber vor allem für
Hintergründe verwendet werden und nicht für Visualisierungen. Diese
Palette ist nicht auf Barrierefreiheit ausgelegt.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">class</span>,fill <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_stat.html">theme_stat</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values<span class="op">=</span><span class="va">zhpal</span><span class="op">$</span><span class="va">zhwebdataviz</span><span class="op">[</span><span class="fl">11</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># ggsave(file = "zhweb_plot.png", width=18, height=8, unit="cm")</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="barrierefreie-grafiken">Barrierefreie Grafiken<a class="anchor" aria-label="anchor" href="#barrierefreie-grafiken"></a>
</h3>
<p>Bei der Erstellung von Grafiken ist es besonders wichtig darauf zu
achten, dass die Grafiken auch für Personen mit (Farb-)Sehschwächen und
Sehbehinderungen interpretierbar sind. Um solche barrierefreie Grafiken
zu erstellen, bieten sich im Allgemeinen verschiedene Strategien an:</p>
<ul>
<li>Daten, die der Grafik zugrunde liegen, zusätzlich als csv oder
-html-Tabelle einbinden</li>
<li>Einen Alternativtext (alt-Text) hinterlegen, der beschreibt, was auf
der Grafik abgebildet ist und wo die Daten zu finden sind</li>
<li>Farbpaletten wählen, die für Farbsehschwächen optimiert sind</li>
<li>Die Grafik soll nicht ausschliesslich aufgrund einer Farbpalette
interpretierbar sein</li>
<li>Die Komplexität der Grafiken sollte auf ein Minimum beschränkt
werden</li>
</ul>
<p>Einige dieser Punkte können direkt bei der Erstellung der Grafiken in
R berücksichtigt werden.</p>
<div class="section level4">
<h4 id="farbsehschwächen">1. Farbsehschwächen<a class="anchor" aria-label="anchor" href="#farbsehschw%C3%A4chen"></a>
</h4>
<p>Damit Grafiken auch für Personen mit Farbsehschwächen möglichst gut
interpretierbar sind, sollten Farben in Grafiken sowohl bezüglich der
<em>Farbanteile</em> als auch der <em>Farbsättigung</em> variiert
werden. Wenn möglich, sollten unterschiedliche Datenkategorien zudem
nicht nur über die Farben sondern auch über unterschiedliche
Darstellungsformen unterscheidbar sein (z.B. Schraffuren, Punkt- oder
Linientypen; siehe 1.3). Auch die direkte Beschriftung von Kategorien
bietet sich hier als Mittel an (siehe 1.4).</p>
</div>
<div class="section level4">
<h4 id="auswahl-farbpaletten">1.2 Auswahl Farbpaletten<a class="anchor" aria-label="anchor" href="#auswahl-farbpaletten"></a>
</h4>
<p>In R können mit dem <a href="https://cran.r-project.org/web/packages/dichromat/index.html" class="external-link">dichromat-Package</a>
diverse Ausprägungen von Farbsehschwäche simuliert werden. Dies erlaubt
es Farbpaletten auszuwählen, die möglichst farbsehschwächenfreundlich
sind. Je heller die Paletten sind, desto weniger geeignet sind sie. Das
trifft vor allem auf Farbpaletten wie <em>zhextralight</em> oder
<em>zhultralight</em> zu.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">dichromat</span><span class="op">)</span></span>
<span><span class="co"># Anzeige der Farbpalette zhdiagonal</span></span>
<span><span class="fu"><a href="../reference/display.html">display</a></span><span class="op">(</span><span class="va">zhpal</span><span class="op">$</span><span class="va">zhdiagonal</span><span class="op">)</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-10-1.png" width="20%" height="20%"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Simulation Grünsehschwäche (Deuteranomalie)</span></span>
<span><span class="fu"><a href="../reference/display.html">display</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/dichromat/man/dichromat.html" class="external-link">dichromat</a></span><span class="op">(</span><span class="va">zhpal</span><span class="op">$</span><span class="va">zhdiagonal</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-10-2.png" width="20%" height="20%"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Simulation Blaublindheit (Tritanopie)</span></span>
<span><span class="fu"><a href="../reference/display.html">display</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/dichromat/man/dichromat.html" class="external-link">dichromat</a></span><span class="op">(</span><span class="va">zhpal</span><span class="op">$</span><span class="va">zhdiagonal</span>,type <span class="op">=</span> <span class="st">"tritan"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-10-3.png" width="20%" height="20%"></p>
<p>Die Simulation kann auch anhand von Grafiken vorgenommen werden.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">diamonds</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">clarity</span>, fill <span class="op">=</span> <span class="va">cut</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"stack"</span>, width <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="../reference/theme_stat.html">theme_stat</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/dichromat/man/dichromat.html" class="external-link">dichromat</a></span><span class="op">(</span><span class="va">zhpal</span><span class="op">$</span><span class="va">zhdiagonal</span>, type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tritan"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="form--oder-linientypen">1.3 Form- oder Linientypen<a class="anchor" aria-label="anchor" href="#form--oder-linientypen"></a>
</h4>
<p>Wenn immer möglich sollten unterschiedliche Kategorien nicht nur mit
unterschiedlichen Farben gekennzeichnet werden, sondern auch mit
unterschiedlichen Schraffuren, Symbol- oder Linientypen (siehe: <a href="https://bbc.github.io/gel/components/infographics/#recommended-layout" class="external-link uri">https://bbc.github.io/gel/components/infographics/#recommended-layout</a>).
Ja nach Grafiktyp eignen sich andere Ansätze:</p>
<ul>
<li><p><strong>Liniendiagramme</strong>: <a href="https://ggplot2.tidyverse.org/reference/aes_linetype_size_shape.html" class="external-link">Linientyp</a></p></li>
<li><p><strong>Säulen / Flächendiagramme</strong>: <a href="https://ggplot2.tidyverse.org/reference/aes_linetype_size_shape.html" class="external-link">Linientyp</a>
oder <a href="Fl%C3%A4chen%20schraffieren%20:%20https://coolbutuseless.github.io/package/ggpattern/articles/pattern-circle.html#the-density-aesthetic-as-a-mapped-aesthetic-1" class="external-link">Flächenstruktur</a></p></li>
<li><p><strong>Scatter / Punkte-Diagramm</strong>: <a href="https://ggplot2.tidyverse.org/reference/aes_linetype_size_shape.html" class="external-link">Symbole</a></p></li>
</ul>
<p><i class="fa fa-exclamation-circle" aria-hidden="true"></i> Ab einer
gewissen Anzahl an Kategorien, wird die Grafik unübersichtlich.</p>
<p><strong>Beispiel : Liniengrafik</strong></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Datenzugriff von: https://www.zh.ch/de/politik-staat/opendata.zhweb-noredirect.zhweb-cache.html?keywords=ogd#/datasets/544@oberjugendanwaltschaft-kanton-zuerich/distributions/1031</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"data/KTZH_00000544_00001031.csv"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols<span class="op">=</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="va">gg_ojuga</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">Jahr</span>, <span class="va">value</span>, color <span class="op">=</span> <span class="va">name</span>, linetype <span class="op">=</span> <span class="va">name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>     <span class="fu"><a href="../reference/theme_stat.html">theme_stat</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">gg_ojuga</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p><strong>Beispiel : Säulendiagramm</strong></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">class</span>, fill <span class="op">=</span> <span class="va">drv</span>, linetype <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_stat.html">theme_stat</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">zhpal</span><span class="op">$</span><span class="va">zhblue</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"right"</span>, </span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span>, vjust <span class="op">=</span> <span class="fl">0.5</span>, hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="direkte-beschriftung">1.4 Direkte Beschriftung<a class="anchor" aria-label="anchor" href="#direkte-beschriftung"></a>
</h4>
<p>Bei gewissen Grafiktypen kann die Unterscheidbarkeit von Kategorien
auch durch direkte Beschriftung verbessert werden. Das ´ggrepel´-package
verfügt über die notwendigen Funktionen. Beispielsweise sorgt es dafür,
dass die Beschriftungen nicht überlappen.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/slowkow/ggrepel" class="external-link">ggrepel</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"data/KTZH_00000544_00001031.csv"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols<span class="op">=</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">Jahr</span>, <span class="va">value</span>, color <span class="op">=</span> <span class="va">name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html" class="external-link">geom_text_repel</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>                    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Jahr</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">Jahr</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">name</span><span class="op">)</span>, direction <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="../reference/theme_stat.html">theme_stat</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Visualisierungen_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Andrea Schnell, Michelle Donzallaz, Lara Theiler, Thomas Knecht, Alexandra Würmli, Thomas Lo Russo, Thomas Fischer.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
